# DDD START - 최범균

최범균 저자님의 DDD START를 읽으면서 핵심 요약하며 공부한 내용입니다.


목차
CHAPTER 1 도메인 모델 시작    
도메인… ………………………………………………………………………… 1  
도메인 모델… …………………………………………………………………… 3  
도메인 모델 패턴………………………………………………………………… 6  
도메인 모델 도출……………………………………………………………… 10  
엔티티와 밸류………………………………………………………………… 17  
엔티티……………………………………………………………………………… 18  
엔티티의 식별자 생성…………………………………………………………… 20  
밸류 타입… ……………………………………………………………………… 22  
엔티티 식별자와 밸류 타입……………………………………………………… 29  
도메인 모델에 set 메서드 넣지 않기…………………………………………… 30  
도메인 용어…………………………………………………………………… 34  

CHAPTER 2 아키텍처 개요  
네 개의 영역…………………………………………………………………… 37  
계층 구조 아키텍처…………………………………………………………… 40  
DIP……………………………………………………………………………… 44  
DIP 주의사항……………………………………………………………………… 50  
DIP와 아키텍처…………………………………………………………………… 52  
도메인 영역의 주요 구성요소… …………………………………………… 54  
엔티티와 밸류… ………………………………………………………………… 55  
애그리거트………………………………………………………………………… 58  
리포지터리………………………………………………………………………… 61  
요청 처리 흐름………………………………………………………………… 65  
인프라스트럭처 개요… ……………………………………………………… 66   
모듈 구성… …………………………………………………………………… 68  

CHAPTER 3 애그리거트  
애그리거트…………………………………………………………………… 71  
애그리거트 루트……………………………………………………………… 75  
도메인 규칙과 일관성…………………………………………………………… 76  
애그리거트 루트의 기능 구현…………………………………………………… 80  
트랜잭션 범위…………………………………………………………………… 82  
리포지터리와 애그리거트…………………………………………………… 85   
ID를 이용한 애그리거트 참조……………………………………………… 87  
ID를 이용한 참조와 조회 성능…………………………………………………… 92  
애그리거트 간 집합 연관…………………………………………………… 94  
애그리거트를 팩토리로 사용하기…………………………………………… 98  

CHAPTER 4 리포지터리와 모델구현(JPA 중심)  
JPA를 이용한 리포지터리 구현…………………………………………… 103  
모듈 위치……………………………………………………………………… 104  
리포지터리 기본 기능 구현…………………………………………………… 104  
매핑 구현……………………………………………………………………… 109  
엔티티와 밸류 기본 매핑 구현… …………………………………………… 109  
기본 생성자… ………………………………………………………………… 112  
필드 접근 방식 사용…………………………………………………………… 114  
AttributeConverter를 이용한 밸류 매핑 처리……………………………… 115  
밸류 컬렉션: 별도 테이블 매핑……………………………………………… 119  
밸류 컬렉션: 한 개 칼럼 매핑………………………………………………… 122  
밸류를 이용한 아이디 매핑…………………………………………………… 123  
별도 테이블에 저장하는 밸류 매핑… ……………………………………… 125  
밸류 컬렉션을 @Entity로 매핑하기… ……………………………………… 129  
ID 참조와 조인 테이블을 이용한 단방향 M-N 매핑………………………… 134  
애그리거트 로딩 전략………………………………………………………… 134  
애그리거트의 영속성 전파…………………………………………………… 138  
식별자 생성 기능……………………………………………………………… 139  

CHAPTER 5 리포지터리의 조회 기능(JPA 중심)  
검색을 위한 스펙……………………………………………………………… 143  
스펙 조합……………………………………………………………………… 145  
JPA를 위한 스펙 구현……………………………………………………… 146  
JPA 스펙 구현………………………………………………………………… 147  
AND/OR 스펙 조합을 위한 구현…………………………………………… 150  
스펙을 사용하는 JPA 리포지터리 구현……………………………………… 153  
정렬 구현……………………………………………………………………… 155  
페이징과 개수 구하기 구현………………………………………………… 160  
조회 전용 기능 구현………………………………………………………… 162  
동적 인스턴스 생성…………………………………………………………… 162  
하이버네이트 @Subselect 사용……………………………………………… 165  

CHAPTER 6 응용 서비스와 표현 영역  
표현 영역과 응용 영역……………………………………………………… 169  
응용 서비스의 역할…………………………………………………………… 171  
도메인 로직 넣지 않기………………………………………………………… 173  
응용 서비스의 구현…………………………………………………………… 176  
응용 서비스의 크기… ………………………………………………………… 176  
응용 서비스의 인터페이스와 클래스………………………………………… 180  
메서드 파라미터와 값 리턴…………………………………………………… 181  
표현 영역에 의존하지 않기…………………………………………………… 185  
트랜잭션 처리………………………………………………………………… 187  
도메인 이벤트 처리…………………………………………………………… 188  
표현 영역……………………………………………………………………… 190  
값 검증………………………………………………………………………… 193  
권한 검사……………………………………………………………………… 197  
조회 전용 기능과 응용 서비스……………………………………………… 201  

CHAPTER 7 도메인 서비스  
여러 애그리거트가 필요한 기능…………………………………………… 203  
도메인 서비스………………………………………………………………… 205  
도메인 서비스의 패키지 위치………………………………………………… 209  
도메인 서비스의 인터페이스와 클래스……………………………………… 210  

CHAPTER 8 애그리거트 트랜잭션 관리  
애그리거트와 트랜잭션……………………………………………………… 213  
선점 잠금……………………………………………………………………… 215  
선전 잠금과 교착 상태………………………………………………………… 217  
비선점 잠금…………………………………………………………………… 218  
강제 버전 증가………………………………………………………………… 227  
오프라인 선점 잠금…………………………………………………………… 228  
오프라인 선점 잠금을 위한 LockManager 인터페이스와 관련 클래스… 230  
DB를 이용한 LockManager 구현… ………………………………………… 233  

CHAPTER 9 도메인 모델과 BOUNDED CONTEXT  
도메인 모델과 경계…………………………………………………………… 241  
BOUNDED CONTEXT……………………………………………………… 242  
BOUNDED CONTEXT의 구현…………………………………………… 245  
BOUNDED CONTEXT 간 통합…………………………………………… 248  
BOUNDED CONTEXT 간 관계…………………………………………… 256  
컨텍스트 맵…………………………………………………………………… 259  

CHAPTER 10 이벤트  
시스템 간 강결합의 문제… ………………………………………………… 261  
이벤트 개요… ………………………………………………………………… 265  
이벤트 관련 구성요소… ……………………………………………………… 266  
이벤트의 구성… ……………………………………………………………… 266  
이벤트 용도… ………………………………………………………………… 269  
이벤트 장점… ………………………………………………………………… 270  
이벤트, 핸들러, 디스패처 구현……………………………………………… 271  
이벤트 클래스… ……………………………………………………………… 271  
EventHandler 인터페이스… ………………………………………………… 273  
이벤트 디스패처인 Events 구현……………………………………………… 275  
흐름 정리……………………………………………………………………… 279  
AOP를 이용한 Events.reset() 실행…………………………………………… 281  
동기 이벤트 처리 문제……………………………………………………… 283  
비동기 이벤트 처리…………………………………………………………… 284  
로컬 핸들러의 비동기 실행…………………………………………………… 285  
메시징 시스템을 이용한 비동기 구현……………………………………… 290  
이벤트 저장소를 이용한 비동기 처리……………………………………… 291  
이벤트 저장소 구현… ………………………………………………………… 293  
이벤트 저장을 위한 이벤트 핸들러 구현…………………………………… 299  
REST API 구현………………………………………………………………… 301  
포워더 구현…………………………………………………………………… 304  
이벤트 적용 시 추가 고려사항……………………………………………… 307  

CHAPTER 11 CQRS  
단일 모델의 단점……………………………………………………………… 311  
CQRS………………………………………………………………………… 312  
웹과 CQRS…………………………………………………………………… 317  
CQRS 장단점………………………………………………………………… 318  




